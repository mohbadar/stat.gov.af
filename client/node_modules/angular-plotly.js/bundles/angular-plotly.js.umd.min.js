!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-plotly.js",["exports","@angular/core","@angular/common"],e):e((t["angular-plotly"]=t["angular-plotly"]||{},t["angular-plotly"].js={}),t.ng.core,t.ng.common)}(this,function(t,r,e){"use strict";var i=Object.assign||function i(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function u(r,o){var i,l,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function n(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,l&&(a=l[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(l,t[1])).done)return a;switch(l=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,l=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],l=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([e,t])}}}var l=function(){function s(){}return s.setModuleName=function(t){s._moduleName=t},s.setPlotly=function(t){s._plotly=t},s.insert=function(t){return-1===s.instances.indexOf(t)&&s.instances.push(t),t},s.remove=function(t){var e=s.instances.indexOf(t);0<=e&&(s.instances.splice(e,1),s._plotly.purge(t))},s.prototype.getInstanceByDivId=function(t){var e,n;try{for(var r=function l(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(s.instances),o=r.next();!o.done;o=r.next()){var i=o.value;if(i&&i.id===t)return i}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r["return"])&&n.call(r)}finally{if(e)throw e.error}}return undefined},s.prototype.getPlotly=function(){if("undefined"!=typeof s._plotly)return s._plotly;throw new Error("ViaCDN"===s._moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed")},s.prototype.waitFor=function(n){return new Promise(function(t){var e=function(){n()?t():setTimeout(e,10)};e()})},s.prototype.newPlot=function(r,o,i,l,a){return function t(e,l,a,s){return new(a||(a=Promise))(function(t,n){function r(t){try{i(s.next(t))}catch(e){n(e)}}function o(t){try{i(s["throw"](t))}catch(e){n(e)}}function i(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(r,o)}i((s=s.apply(e,l||[])).next())})}(this,void 0,void 0,function(){var e,n=this;return u(this,function(t){switch(t.label){case 0:return[4,this.waitFor(function(){return"waiting"!==n.getPlotly()})];case 1:return t.sent(),a?(e={data:o,layout:i,config:l,frames:a},[2,this.getPlotly().newPlot(r,e).then(function(){return s.insert(r)})]):[2,this.getPlotly().newPlot(r,o,i,l).then(function(){return s.insert(r)})]}})})},s.prototype.plot=function(t,e,n,r,o){if(o){var i={data:e,layout:n,config:r,frames:o};return this.getPlotly().plot(t,i)}return this.getPlotly().plot(t,e,n,r)},s.prototype.update=function(t,e,n,r,o){if(o){var i={data:e,layout:n,config:r,frames:o};return this.getPlotly().react(t,i)}return this.getPlotly().react(t,e,n,r)},s.prototype.resize=function(t){return this.getPlotly().Plots.resize(t)},s.instances=[],s._plotly=undefined,s._moduleName=undefined,s.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],s.ngInjectableDef=r.defineInjectable({factory:function(){return new s},token:s,providedIn:"root"}),s}(),n=function(){function t(t,e,n){this.plotly=t,this.iterableDiffers=e,this.keyValueDiffers=n,this.defaultClassName="js-plotly-plot",this.datarevision=0,this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.initialized=new r.EventEmitter,this.update=new r.EventEmitter,this.purge=new r.EventEmitter,this.error=new r.EventEmitter,this.afterExport=new r.EventEmitter,this.afterPlot=new r.EventEmitter,this.animated=new r.EventEmitter,this.animatingFrame=new r.EventEmitter,this.animationInterrupted=new r.EventEmitter,this.autoSize=new r.EventEmitter,this.beforeExport=new r.EventEmitter,this.buttonClicked=new r.EventEmitter,this.click=new r.EventEmitter,this.clickAnnotation=new r.EventEmitter,this.deselect=new r.EventEmitter,this.doubleClick=new r.EventEmitter,this.framework=new r.EventEmitter,this.hover=new r.EventEmitter,this.legendClick=new r.EventEmitter,this.legendDoubleClick=new r.EventEmitter,this.relayout=new r.EventEmitter,this.restyle=new r.EventEmitter,this.redraw=new r.EventEmitter,this.selected=new r.EventEmitter,this.selecting=new r.EventEmitter,this.sliderChange=new r.EventEmitter,this.sliderEnd=new r.EventEmitter,this.sliderStart=new r.EventEmitter,this.transitioning=new r.EventEmitter,this.transitionInterrupted=new r.EventEmitter,this.unhover=new r.EventEmitter,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","click","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover"]}return t.prototype.ngOnInit=function(){var e=this;this.createPlot().then(function(){var t=e.createFigure();e.initialized.emit(t)})},t.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined);var t=this.createFigure();this.purge.emit(t),l.remove(this.plotlyInstance)},t.prototype.ngOnChanges=function(t){var e=!1,n=t.revision;n&&!n.isFirstChange()&&(e=!0);var r=t.debug;r&&!r.isFirstChange()&&(e=!0),e&&this.updatePlot(),this.updateWindowResizeHandler()},t.prototype.ngDoCheck=function(){var t=!1;this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(t=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=undefined;this.dataDiffer?this.dataDiffer.diff(this.data)&&(t=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=undefined;t&&this.plotlyInstance&&(this.datarevision+=1,this.updatePlot())},t.prototype.getWindow=function(){return window},t.prototype.getClassName=function(){var t=[this.defaultClassName];return Array.isArray(this.className)?t=t.concat(this.className):this.className&&t.push(this.className),t.join(" ")},t.prototype.createPlot=function(){var r=this;return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(function(n){r.plotlyInstance=n,r.getWindow().gd=r.debug?n:undefined,r.eventNames.forEach(function(e){var t="plotly_"+e.toLowerCase();n.on(t,function(t){return r[e].emit(t)})}),r.updateWindowResizeHandler()},function(t){console.error("Error while plotting:",t),r.error.emit(t)})},t.prototype.createFigure=function(){var t=this.plotlyInstance;return{data:t.data,layout:t.layout,frames:t._transitionData?t._transitionData._frames:null}},t.prototype.updatePlot=function(){var e=this;if(!this.plotlyInstance){var t=new Error("Plotly component wasn't initialized");throw this.error.emit(t),t}var n=i({datarevision:this.datarevision},this.layout);return this.plotly.update(this.plotlyInstance,this.data,n,this.config,this.frames).then(function(){var t=e.createFigure();e.update.emit(t)},function(t){console.error("Error while updating plot:",t),e.error.emit(t)})},t.prototype.updateWindowResizeHandler=function(){var t=this;this.useResizeHandler?this.resizeHandler===undefined&&(this.resizeHandler=function(){return t.plotly.resize(t.plotlyInstance)},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined)},t.prototype.dataDifferTrackBy=function(t,e){var n=Object.assign({},e,{uid:""});return JSON.stringify(n)},t.decorators=[{type:r.Component,args:[{selector:"plotly-plot",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>',providers:[l]}]}],t.ctorParameters=function(){return[{type:l},{type:r.IterableDiffers},{type:r.KeyValueDiffers}]},t.propDecorators={plotEl:[{type:r.ViewChild,args:["plot"]}],data:[{type:r.Input}],layout:[{type:r.Input}],config:[{type:r.Input}],frames:[{type:r.Input}],style:[{type:r.Input}],divId:[{type:r.Input}],revision:[{type:r.Input}],className:[{type:r.Input}],debug:[{type:r.Input}],useResizeHandler:[{type:r.Input}],initialized:[{type:r.Output}],update:[{type:r.Output}],purge:[{type:r.Output}],error:[{type:r.Output}],afterExport:[{type:r.Output}],afterPlot:[{type:r.Output}],animated:[{type:r.Output}],animatingFrame:[{type:r.Output}],animationInterrupted:[{type:r.Output}],autoSize:[{type:r.Output}],beforeExport:[{type:r.Output}],buttonClicked:[{type:r.Output}],click:[{type:r.Output}],clickAnnotation:[{type:r.Output}],deselect:[{type:r.Output}],doubleClick:[{type:r.Output}],framework:[{type:r.Output}],hover:[{type:r.Output}],legendClick:[{type:r.Output}],legendDoubleClick:[{type:r.Output}],relayout:[{type:r.Output}],restyle:[{type:r.Output}],redraw:[{type:r.Output}],selected:[{type:r.Output}],selecting:[{type:r.Output}],sliderChange:[{type:r.Output}],sliderEnd:[{type:r.Output}],sliderStart:[{type:r.Output}],transitioning:[{type:r.Output}],transitionInterrupted:[{type:r.Output}],unhover:[{type:r.Output}]},t}(),a=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{imports:[e.CommonModule],declarations:[n],providers:[l],exports:[n]}]}],t}(),o=function(){function t(){if(!this.isValid()){throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.")}l.setPlotly(t.plotlyjs)}return t.prototype.isValid=function(){return t.plotlyjs!==undefined&&"function"==typeof t.plotlyjs.plot},t.plotlyjs={},t.decorators=[{type:r.NgModule,args:[{imports:[e.CommonModule,a],declarations:[],exports:[n]}]}],t.ctorParameters=function(){return[]},t}(),s=function(){function o(t){this.plotlyService=t,l.setModuleName("ViaCDN")}return Object.defineProperty(o,"plotlyVersion",{set:function(t){if(!("latest"===t||/^\d\.\d{1,2}\.\d{1,2}$/.test(t)))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3)");o.loadViaCDN(),o._plotlyVersion=t},enumerable:!0,configurable:!0}),Object.defineProperty(o,"plotlyBundle",{set:function(t){if(!(null===t||0<=o.plotlyBundleNames.indexOf(t))){var e=o.plotlyBundleNames.map(function(t){return'"'+t+'"'}).join(", ");throw new Error("Invalid plotly bundle. Please set to null for full or "+e+" for a partial bundle.")}o._plotlyBundle=t},enumerable:!0,configurable:!0}),o.loadViaCDN=function(){l.setPlotly("waiting");setTimeout(function(){var e=null==o._plotlyBundle?"https://cdn.plot.ly/plotly-"+o._plotlyVersion+".min.js":"https://cdn.plot.ly/plotly-"+o._plotlyBundle+"-"+o._plotlyVersion+".min.js",t=document.createElement("script");t.type="text/javascript",t.src=e,t.onerror=function(){return console.error("Error loading plotly.js library from "+e)},document.getElementsByTagName("head")[0].appendChild(t);var n=200,r=function(){var t=window.Plotly;if(t)l.setPlotly(t);else{if(!(0<n))throw new Error("Error loading plotly.js library from "+e+". Timeout.");n--,setTimeout(r,50)}};r()})},o.forRoot=function(t){throw new Error("[PlotlyViaCDNModule] forRoot method is deprecated. Please see: https://github.com/plotly/angular-plotly.js#customizing-the-plotlyjs-bundle")},o._plotlyBundle=null,o._plotlyVersion="latest",o.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],o.decorators=[{type:r.NgModule,args:[{imports:[e.CommonModule,a],declarations:[],exports:[n]}]}],o.ctorParameters=function(){return[{type:l}]},o}(),p=function(){function t(){var t=window.Plotly;if(void 0===t)throw new Error("Plotly object not found on window.");l.setPlotly(t)}return t.forRoot=function(){throw new Error("[PlotlyViaWindowModule] forRoot method is deprecated. Please see: https://github.com/plotly/angular-plotly.js#plotly-via-window-module")},t.decorators=[{type:r.NgModule,args:[{imports:[e.CommonModule,a],declarations:[],exports:[n]}]}],t.ctorParameters=function(){return[]},t}();t.PlotlyModule=o,t.PlotlyViaCDNModule=s,t.PlotlyViaWindowModule=p,t.PlotComponent=n,t.PlotlyService=l,t.ɵa=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-plotly.js.umd.min.js.map